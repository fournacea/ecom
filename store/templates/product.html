{% extends 'base.html' %}
{% load static %}

{% block content %}
	{% comment %} <center>
	<div class="container mt-3">
		<div class="card mb-3" style="max-width: 540px;">
		<div class="row g-0">
			<div class="col-md-4">
			<img src="{{ product.image.url }}" class="img-fluid rounded-start" alt="..." />
			</div>
			<div class="col-md-8">
			<div class="card-body">
				<h5 class="card-title">{{ product.name }}</h5>
				<p class="card-text mt-3">{{ product.description }}</p>
				<a class="btn btn-outline-dark mt-auto" href="{% url 'home' %}"
									>Home</a>
			</div>
			</div>
		</div>
		</div>
	</div>
	</center> {% endcomment %}



    <center>
        <div class="container mt-3">
            <div class="card mb-3">
                <div class="row g-0">
                    <div class="col-md-4 d-flex align-items-center">
                        <img src="{{ product.image.url }}" class="img-fluid rounded-start" alt="..." />
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">{{ product.name }}</h5>
                            <p class="card-text mt-3">{{ product.description }}</p>
							{% if product.on_sale %}
								<div class="d-flex justify-content-center large text-warning mb-2">
									<div class="bi-star-fill"></div>
									&nbsp;&nbsp;Sale!&nbsp;&nbsp;
									<div class="bi-star-fill"></div>
									</div>
					
									<!-- Product price-->
									<strike>
									${{ product.price }}
									</strike>
									&nbsp;
									${{ product.sale_price }}
									<br>ID: {{ product.id }}
					
					
					
							{% else %}
								${{ product.price }}	
														
							{% endif %} 
							<br><br>
                            <a class="btn btn-outline-dark mt-auto" href="{% url 'home' %}">Home</a>
							<button 
								type="button" 
								class="btn btn-success"
								value="{{ product.id }}"
								id="add-cart"
							>Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </center>

  	<br><br><br><br><br><br><br><br><br><br><br><br><br>
	<!-- JS for cart functionality -->
	<script>
		// Check if button pressed
		$(document).on('click', '#add-cart', function(e){
			e.preventDefault();
			$.ajax({
				type: 'POST',
				url: '{% url 'cart-add' %}',
				data: {
					product_id: $('#add-cart').val(),
					csrfmiddlewaretoken: '{{ csrf_token }}',
					action: 'post'
				},
		
				success: function(json){
					//console.log(json)
					{% comment %} document.getElementById("cart_quantity").textContent = json.qty
					location.reload(); {% endcomment %}
				},
		
				error: function(xhr, errmsg, err){
		
				}
		
		
			});
		
		
		
		})
		
		</script>
	{% comment %} <script id="dynamic-data" data-cart-add-url="{% url 'cart-add' %}"></script>
	<script id="dynamic-data1" data-cart-add-url="{% url 'cart-add' %}"></script>
	<script src="{% static 'js/cart.js' %}"></script> {% endcomment %}
{% endblock %}
